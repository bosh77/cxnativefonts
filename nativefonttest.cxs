
#GLFW_USE_MINGW=False
'#GLFW_USE_MINGW=True

#GLFW_GCC_MSIZE_WINNT="32"

#GLFW_WINDOW_TITLE="Native Fonts Demo"


'#OPENGL_DEPTH_BUFFER_ENABLED=True


Import mojo2

Import opengl.gles20

Import nativefonts


Function Main()
	New Game()
End

Class Game Extends App

	Field font1:NativeFonts
	Field font2:NativeFonts
	Field font3:NativeFonts
	Field font4:NativeFonts
	Field font5:NativeFonts
	
	Field fontlist:String[]
	Field fontlisttxt:String
		
	Field canv:Canvas

	'summary:The OnCreate Method is called when mojo has been initialized and the application has been successfully created.
	Method OnCreate()
	
		canv = New Canvas
		
		SetDeviceWindow(1024, 768, 4 + 2 + 8)
		
	
		font1 = New NativeFonts("Times New Roman", 52, FontStyle.FW_BOLD, False)
		font2 = New NativeFonts("Vineta BT", 50, 0, False)
		font3 = New NativeFonts("Arial", 28, FontStyle.FW_BOLD, False)
		font4 = New NativeFonts("Helvetica", 46, FontStyle.FW_REGULAR, True)
		font5 = New NativeFonts("Helvetica", 14, 0, False)
	
		
		fontlist = NativeFonts.GetFontList
		
		For Local i = 0 To fontlist.Length - 1
			
			fontlisttxt += fontlist[i]
				
			If i < fontlist.Length - 1 Then fontlisttxt += ", "
			
		Next
		
		
		
		
		SetUpdateRate(60)
	
		SetSwapInterval(1)
		
	End
	
	'summary: This method is automatically called when the application's update timer ticks.
	Method OnUpdate()
	
		
		Local x = MouseX
		Local y = MouseY
		
		Local b = MouseHit(MOUSE_LEFT)
		
		
		If b Then
			
		
			If x > 20 + 100 and x < 500 - 200 and y > 20 + 100 and y < 320 - 200 Then font1.SelectFont
			
			If x > 20 and x < 500 - 250 and y > 20 and y < 320 - 160 Then font2.SelectFont
			
			If x > 250 and x < 500 and y > 180 and y < 320 Then font3.SelectFont
			
			
			If x > 20 + 500 and x < 500 + 500 and y > 20 and y < 320 Then font4.SelectFont
			
			
			If x > 20 and x < 1000 and y > 340 and y < 680 Then font5.SelectFont
					
		
		EndIf
		
		
	End
	
	'summary: This method is automatically called when the application should render itself, such as when the application first starts, or following an OnUpdate call.
	Method OnRender()
		
		
		canv.Clear 0, 0, 0
		
		canv.PushMatrix

		canv.SetProjection2d(0, DeviceWidth, 0, DeviceHeight)
				
		canv.SetViewport(0, 0, DeviceWidth, DeviceHeight)
		
		
		
		canv.SetAlpha 1
		
		
		
		
		Local x = 20
		Local y = 20
		
		Local w = 480
		Local h = 300
		
		For Local i = 0 To 2
			
			canv.SetColor(i / 6.0, 3 - i / 3.0, 0.7)
			
			canv.DrawRect(x, y, w, h)
			
			x = x + 500
			
			If i = 1 Then x = 20; y = y + 320; w = 980; h = 340
		
		Next
		
			
		canv.Flush
		
		'RECT 1
		font1.DrawText("MiddleCenter", 20 + 240, 20 + 150, JsMiddleCenter, COL_DARKBLUE)
		font2.DrawText("TopLeft", 20, 20, JsTopLeft, COL_DARKGOLDENROD)
		font3.DrawText("BottomRight", 20 + 480, 20 + 300, JsBottomRight, COL_RED)
		
				
		'RECT 2
		DrawStringM(font4, "Test text with very long message to test DrawTextM, which corresponds to Draw Text Multiline", 20 + 740, 20 + 150, COL_BLACK, JsMiddleCenter, 480)
		
		
		'RECT 3
		DrawStringM(font5, fontlisttxt, 20, 20 + 320, COL_WHITE, JsTopLeft, 980)
	
	
		font1.DrawText("Click To Change Font", 512, 720, JsMiddleCenter, COL_LIGHTBLUE)

		
		canv.PopMatrix
		
		
		
	End

	'summary: This method is called instead of OnRender when the application should render itself, but there are still resources such as images or sounds in the process of being loaded.
	Method OnLoading()
		
	End
	
	'summary: This method is called when the application's device window size changes.
	Method OnResize()
		
	End
	
	'#REGION Code to handle susped status of the game goes here
	
	'summary: OnSuspend is called when your application is about to be suspended.
	Method OnSuspend()
	
	End
	
	'summary: OnResume is called when your application is made active again after having been in a suspended state.
	Method OnResume()
		
	End
	'#END REGION
	
	'#REGION Code to handle game closing goes here:
	
	'summary: This method is called when the application's 'close' button is pressed.
	Method OnClose()
		Super.OnClose()
	End

	'summary:This method is called when the application's 'back' button is pressed.
	Method OnBack()
		Super.OnBack()
	End
	
	'#END REGION

End